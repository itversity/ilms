
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Getting Started &#8212; My Jupyter Book</title>
    
  <link rel="stylesheet" href="_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Writing Basic SQL Queries" href="03_writing_basic_sql_queries.html" />
    <link rel="prev" title="Mastering Postgresql" href="content.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="index.html">
  
  
  <h1 class="site-logo" id="site-title">My Jupyter Book</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="content.html">
   Mastering Postgresql
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="03_writing_basic_sql_queries.html">
   Writing Basic SQL Queries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="04_creating_tables_and_indexes.html">
   Creating Tables and Indexes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="05_partitioning_tables_and_indexes.html">
   Partitioning Tables and Indexes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="06_predefined_functions.html">
   Pre-Defined Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="07_writing_advanced_sql_queries.html">
   Writing Advanced SQL Queries
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/01_getting_started.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/01_getting_started.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#connecting-to-database">
   Connecting to Database
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-psql">
   Using psql
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup-sql-workbench">
   Setup SQL Workbench
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sql-workbench-and-postgres">
   SQL Workbench and Postgres
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sql-workbench-features">
   SQL Workbench Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup-postgres-using-docker">
   Setup Postgres using Docker
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#data-loading-utilities">
   Data Loading Utilities
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-copy-command">
     Using COPY Command
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>As part of this section we will primarily understand different ways to get started with Postgres.</p>
<ul class="simple">
<li><p>Connecting to Database</p></li>
<li><p>Using psql</p></li>
<li><p>Setup SQL Workbench</p></li>
<li><p>SQL Workbench and Postgres</p></li>
<li><p>SQL Workbench Features</p></li>
<li><p>Setup Postgres using Docker</p></li>
<li><p>Data Loading Utilities</p></li>
</ul>
<div class="section" id="connecting-to-database">
<h2>Connecting to Database<a class="headerlink" href="#connecting-to-database" title="Permalink to this headline">¶</a></h2>
<p>We will be using JupyterHub based environment to master Postgresql. Let us go through the steps involved to get started using JupyterHub environment.</p>
<ul class="simple">
<li><p>We will use Python Kernel with sql magic command and for that we need to first load the sql extension.</p></li>
<li><p>Create environment variable <code class="docutils literal notranslate"><span class="pre">DATABASE_URL</span></code> using SQL Alchemy format.</p></li>
<li><p>Write a simple query to get data from information schema table to validate database connectivity.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> sql
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="mi">7600</span><span class="n">c8b786e3</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;load_ext&#39;</span><span class="p">,</span> <span class="s1">&#39;sql&#39;</span><span class="p">)</span>

<span class="nn">~/Projects/Internal/bootcamp/ilms/ilms-env/lib/python3.7/site-packages/IPython/core/interactiveshell.py</span> in <span class="ni">run_line_magic</span><span class="nt">(self, magic_name, line, _stack_depth)</span>
<span class="g g-Whitespace">   </span><span class="mi">2324</span>                 <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;local_ns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_local_scope</span><span class="p">(</span><span class="n">stack_depth</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2325</span>             <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">builtin_trap</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2326</span>                 <span class="n">result</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2327</span>             <span class="k">return</span> <span class="n">result</span>
<span class="g g-Whitespace">   </span><span class="mi">2328</span> 

<span class="nn">&lt;decorator-gen-57&gt;</span> in <span class="ni">load_ext</span><span class="nt">(self, module_str)</span>

<span class="nn">~/Projects/Internal/bootcamp/ilms/ilms-env/lib/python3.7/site-packages/IPython/core/magic.py</span> in <span class="ni">&lt;lambda&gt;</span><span class="nt">(f, *a, **k)</span>
<span class="g g-Whitespace">    </span><span class="mi">185</span>     <span class="c1"># but it&#39;s overkill for just that one bit of state.</span>
<span class="g g-Whitespace">    </span><span class="mi">186</span>     <span class="k">def</span> <span class="nf">magic_deco</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">187</span>         <span class="n">call</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">188</span> 
<span class="g g-Whitespace">    </span><span class="mi">189</span>         <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>

<span class="nn">~/Projects/Internal/bootcamp/ilms/ilms-env/lib/python3.7/site-packages/IPython/core/magics/extension.py</span> in <span class="ni">load_ext</span><span class="nt">(self, module_str)</span>
<span class="g g-Whitespace">     </span><span class="mi">31</span>         <span class="k">if</span> <span class="ow">not</span> <span class="n">module_str</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span>             <span class="k">raise</span> <span class="n">UsageError</span><span class="p">(</span><span class="s1">&#39;Missing module name.&#39;</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">33</span>         <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">extension_manager</span><span class="o">.</span><span class="n">load_extension</span><span class="p">(</span><span class="n">module_str</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">34</span> 
<span class="g g-Whitespace">     </span><span class="mi">35</span>         <span class="k">if</span> <span class="n">res</span> <span class="o">==</span> <span class="s1">&#39;already loaded&#39;</span><span class="p">:</span>

<span class="nn">~/Projects/Internal/bootcamp/ilms/ilms-env/lib/python3.7/site-packages/IPython/core/extensions.py</span> in <span class="ni">load_extension</span><span class="nt">(self, module_str)</span>
<span class="g g-Whitespace">     </span><span class="mi">78</span>             <span class="k">if</span> <span class="n">module_str</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">79</span>                 <span class="k">with</span> <span class="n">prepended_to_syspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ipython_extension_dir</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">80</span>                     <span class="n">mod</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">module_str</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">81</span>                     <span class="k">if</span> <span class="n">mod</span><span class="o">.</span><span class="vm">__file__</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ipython_extension_dir</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">82</span>                         <span class="nb">print</span><span class="p">((</span><span class="s2">&quot;Loading extensions from </span><span class="si">{dir}</span><span class="s2"> is deprecated. &quot;</span>

<span class="nn">/usr/local/opt/python@3.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py</span> in <span class="ni">import_module</span><span class="nt">(name, package)</span>
<span class="g g-Whitespace">    </span><span class="mi">125</span>                 <span class="k">break</span>
<span class="g g-Whitespace">    </span><span class="mi">126</span>             <span class="n">level</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="ne">--&gt; </span><span class="mi">127</span>     <span class="k">return</span> <span class="n">_bootstrap</span><span class="o">.</span><span class="n">_gcd_import</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="n">level</span><span class="p">:],</span> <span class="n">package</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">128</span> 
<span class="g g-Whitespace">    </span><span class="mi">129</span> 

<span class="nn">/usr/local/opt/python@3.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py</span> in <span class="ni">_gcd_import</span><span class="nt">(name, package, level)</span>

<span class="nn">/usr/local/opt/python@3.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py</span> in <span class="ni">_find_and_load</span><span class="nt">(name, import_)</span>

<span class="nn">/usr/local/opt/python@3.7/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/_bootstrap.py</span> in <span class="ni">_find_and_load_unlocked</span><span class="nt">(name, import_)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;sql&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">env</span> DATABASE_URL=postgresql://training:itversity!23@localhost:5432/training_sms
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>env: DATABASE_URL=postgresql://training:itversity!23@localhost:5432/training_sms
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">sql</span> SELECT * FROM information_schema.tables LIMIT 10
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>10 rows affected.
</pre></div>
</div>
<div class="output text_html"><table>
    <tr>
        <th>table_catalog</th>
        <th>table_schema</th>
        <th>table_name</th>
        <th>table_type</th>
        <th>self_referencing_column_name</th>
        <th>reference_generation</th>
        <th>user_defined_type_catalog</th>
        <th>user_defined_type_schema</th>
        <th>user_defined_type_name</th>
        <th>is_insertable_into</th>
        <th>is_typed</th>
        <th>commit_action</th>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>public</td>
        <td>t</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>public</td>
        <td>users</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_type</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_foreign_server</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_roles</td>
        <td>VIEW</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_settings</td>
        <td>VIEW</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_cursors</td>
        <td>VIEW</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_stat_bgwriter</td>
        <td>VIEW</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_subscription</td>
        <td>BASE TABLE</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>YES</td>
        <td>NO</td>
        <td>None</td>
    </tr>
    <tr>
        <td>training_sms</td>
        <td>pg_catalog</td>
        <td>pg_stat_progress_vacuum</td>
        <td>VIEW</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>None</td>
        <td>NO</td>
        <td>NO</td>
        <td>None</td>
    </tr>
</table></div></div>
</div>
</div>
<div class="section" id="using-psql">
<h2>Using psql<a class="headerlink" href="#using-psql" title="Permalink to this headline">¶</a></h2>
<p>Let us understand how to use <code class="docutils literal notranslate"><span class="pre">psql</span></code> utility to perform database operations.</p>
<ul class="simple">
<li><p>We need to have at least Postgres Client installed on the server from which you want to use psql to connect to Postgres Server.</p></li>
<li><p>If you are on the server where <strong>Postgres Database Server</strong> is installed, <code class="docutils literal notranslate"><span class="pre">psql</span></code> will be automatically available.</p></li>
<li><p>We can run <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">-u</span> <span class="pre">postgres</span> <span class="pre">psql</span> <span class="pre">-U</span> <span class="pre">postgres</span></code> from the server provided you have sudo permissions on the server. Otherwise we need to go with <code class="docutils literal notranslate"><span class="pre">psql</span> <span class="pre">-U</span> <span class="pre">postgres</span> <span class="pre">-W</span></code> which will prompt for the password.</p></li>
<li><p><strong>postgres</strong> is the super user for the postgres server and hence typically developers will not have access to it in non development environments.</p></li>
<li><p>As a developer, we can use following command to connect to a database setup on postgres server using user credentials.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">sms_user</span> <span class="o">-</span><span class="n">h</span> <span class="o">&lt;</span><span class="n">host_ip_or_dns_alias</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">d</span> <span class="o">&lt;</span><span class="n">db_name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">W</span>
</pre></div>
</div>
<ul class="simple">
<li><p>We typically use <code class="docutils literal notranslate"><span class="pre">psql</span></code> to troubleshoot the issues in non development servers. IDEs such as <strong>SQL Alchemy</strong> might be better for regular usage as part of development and unit testing process.</p></li>
<li><p>For this course, we will be primarily using Jupyter based environment for practice.</p></li>
</ul>
</div>
<div class="section" id="setup-sql-workbench">
<h2>Setup SQL Workbench<a class="headerlink" href="#setup-sql-workbench" title="Permalink to this headline">¶</a></h2>
<p>Let us understand how to setup and use SQL Workbench.</p>
<p><strong>Why SQL Workbench</strong></p>
<p>Let us see the details why we might have to use SQL Workbench.</p>
<ul class="simple">
<li><p>Using Database CLIs such psql for postgres, mysql etc can be cumbersome for those who are not comfortable with command line interfaces.</p></li>
<li><p>Database IDEs such as SQL Workbench will provide required features to run queries against databases with out worrying to much about underlying data dictionaries.</p></li>
<li><p>SQL Workbench provide required features to review databases and objects with out writing queries or running database specific commands.</p></li>
<li><p>Also Database IDEs provide capabilities to preserve the scripts we develop.</p></li>
</ul>
<blockquote>
<div><p><strong>In short Database IDEs such as SQL Workbench improves productivity.</strong></p>
</div></blockquote>
<p><strong>Alternative IDEs</strong></p>
<p>There are several IDEs in the market.</p>
<ul class="simple">
<li><p>TOAD</p></li>
<li><p>SQL Developer for Oracle</p></li>
<li><p>MySQL Workbench
and many others</p></li>
</ul>
<p><strong>Install Workbench</strong></p>
<p>Here are the instructions to setup SQL Workbench.</p>
<ul class="simple">
<li><p>Download SQL Workbench (typically zip file)</p></li>
<li><p>Unzip and launch</p></li>
</ul>
<p>Once installed we need to perform below steps which will be covered in detail as part of next topic.</p>
<ul class="simple">
<li><p>Download JDBC driver for the database we would like to connect.</p></li>
<li><p>Get the database connectivity information and connect to the database.</p></li>
</ul>
</div>
<div class="section" id="sql-workbench-and-postgres">
<h2>SQL Workbench and Postgres<a class="headerlink" href="#sql-workbench-and-postgres" title="Permalink to this headline">¶</a></h2>
<p>Let us connect to Postgres Database using SQL Workbench.</p>
<ul class="simple">
<li><p>We are trying to connect to Postgres Database that is running as part of Docker container running in a Ubuntu 18.04 VM provisioned from GCP.</p></li>
<li><p>We have published Postgres database port to port 5433 on Ubuntu 18.04 VM.</p></li>
<li><p>We typically use ODBC or JDBC to connect to a Database from remote machines (our PC).</p></li>
<li><p>Here are the pre-requisites to connect to a Database on GCP.</p>
<ul>
<li><p>Make sure 5433 port is opened as part of the firewalls.</p></li>
<li><p>If you have telnet configured on your system on which SQL Workbench is installed, make sure to validate by running telnet command using ip or DNS Alias and port number 5433.</p></li>
<li><p>Ensure that you have downloaded right JDBC Driver for Postgres.</p></li>
<li><p>Make sure to have right credentials (username and password).</p></li>
<li><p>Ensure that you have database created on which the user have permissions.</p></li>
</ul>
</li>
<li><p>You can validate credentials and permissions to the database by installing postgres client on Ubuntu 18.04 VM and then by connecting to the database using the credentials.</p></li>
<li><p>Once you have all the information required along with JDBC jar, ensure to save the information as part of the profile. You can also validate before saving the details by using <strong>Test</strong> option.</p></li>
</ul>
</div>
<div class="section" id="sql-workbench-features">
<h2>SQL Workbench Features<a class="headerlink" href="#sql-workbench-features" title="Permalink to this headline">¶</a></h2>
<p>Here are some of the key features, you have to familiar with related to SQL Workbench.</p>
<ul class="simple">
<li><p>Saving profiles to connect to multiple databases.</p></li>
<li><p>Develop SQL files and preserve them for future usage.</p></li>
<li><p>Access data dictionary or information schema to validate tables, columns, sequences, indexes, constraints etc.</p></li>
<li><p>Generate scripts out of existing data.</p></li>
<li><p>Ability to manage database objects with out writing any commands. We can drop tables, indexes, sequences etc by right clicking and then dropping.</p></li>
</ul>
<p>Almost all leading IDEs provide all these features in similar fashion.</p>
<p><strong>Usage Scenarios</strong></p>
<p>Here are <strong>some of the usage scenarios</strong> for database IDEs such as SQL Workbench as part of day to day responsibilities.</p>
<ul class="simple">
<li><p>Developers for generating and validating data as part of unit testing.</p></li>
<li><p>Testers to validate data for their test cases.</p></li>
<li><p>Business Analysts and Data Analysts to run ad hoc queries to understand the data better.</p></li>
<li><p>Developers to troubleshoot data related production issues using read only accounts.</p></li>
</ul>
</div>
<div class="section" id="setup-postgres-using-docker">
<h2>Setup Postgres using Docker<a class="headerlink" href="#setup-postgres-using-docker" title="Permalink to this headline">¶</a></h2>
<p>In some cases you might want to have postgres setup on your machine. Let us understand how we can setup Postgres using Docker.</p>
<ul class="simple">
<li><p>If you are using Windows or Mac, ensure that you have installed Docker Desktop.</p></li>
<li><p>If you are using Ubuntu based desktop, make sure to setup Docker.</p></li>
<li><p>Here are the steps that can be used to setup Postgres database using Docker.</p>
<ul>
<li><p>Pull the postgres image using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">pull</span></code></p></li>
<li><p>Create the container using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">create</span></code>.</p></li>
<li><p>Start the container using <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span></code>.</p></li>
<li><p>Alternatively we can use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> which will pull, create and start the container.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span></code> or <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">logs</span> <span class="pre">-f</span></code> to review the logs to ensure Postgres Server is up and running.</p></li>
</ul>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">postgres</span>

<span class="n">docker</span> <span class="n">container</span> <span class="n">create</span> \
  <span class="o">--</span><span class="n">name</span> <span class="n">itv_pg</span> \
  <span class="o">-</span><span class="n">p</span> <span class="mi">5433</span><span class="p">:</span><span class="mi">5432</span> \
  <span class="o">-</span><span class="n">h</span> <span class="n">itv_pg</span> \
  <span class="o">-</span><span class="n">e</span> <span class="n">POSTGRES_PASSWORD</span><span class="o">=</span><span class="n">itversity</span> \
  <span class="n">postgres</span>

<span class="n">docker</span> <span class="n">start</span> <span class="n">itv_pg</span>

<span class="n">docker</span> <span class="n">logs</span> <span class="n">itv_pg</span>
</pre></div>
</div>
</div>
<div class="section" id="data-loading-utilities">
<h2>Data Loading Utilities<a class="headerlink" href="#data-loading-utilities" title="Permalink to this headline">¶</a></h2>
<p>Let us understand how we can load the data into databases using utilities provided.</p>
<ul class="simple">
<li><p>Most of the databases provide data loading utilities.</p></li>
<li><p>One of the most common way of getting data into database tables is by using data loading utilities provided by the underlying datatabase technology.</p></li>
<li><p>We can load delimited files into database using these utilities.</p></li>
<li><p>Here are the steps we can follow to load the delimited data into the table.</p>
<ul>
<li><p>Make sure files are available on the server from which we are trying to load.</p></li>
<li><p>Ensure the database and table are created for the data to be loaded.</p></li>
<li><p>Run relevant command to load the data into the table.</p></li>
<li><p>Make sure to validate by running queries.</p></li>
</ul>
</li>
<li><p>Let us see a demo by loading a sample file into the table in Postgres database. The performance will be better if the files are loaded from the server directly.</p></li>
</ul>
<div class="section" id="using-copy-command">
<h3>Using COPY Command<a class="headerlink" href="#using-copy-command" title="Permalink to this headline">¶</a></h3>
<p>We can use COPY Command using <code class="docutils literal notranslate"><span class="pre">psql</span></code> to copy the data into the table.</p>
<ul class="simple">
<li><p>Make sure database is created along with the user with right permissions. Also the user who want to use <code class="docutils literal notranslate"><span class="pre">COPY</span></code> command need to have pg_read_server_files role assigned.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">exec</span> <span class="o">-</span><span class="n">it</span> <span class="n">itv_pg</span> <span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">postgres</span>

<span class="n">CREATE</span> <span class="n">DATABASE</span> <span class="n">itversity_sms_db</span><span class="p">;</span>
<span class="n">CREATE</span> <span class="n">USER</span> <span class="n">itversity_sms_user</span> <span class="n">WITH</span> <span class="n">PASSWORD</span> <span class="s1">&#39;sms_password&#39;</span><span class="p">;</span>
<span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">ON</span> <span class="n">DATABASE</span> <span class="n">itversity_sms_db</span> <span class="n">TO</span> <span class="n">itversity_sms_user</span><span class="p">;</span>
<span class="n">GRANT</span> <span class="n">pg_read_server_files</span> <span class="n">TO</span> <span class="n">itversity_sms_user</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Exit and connect as non system user created.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">psql</span> <span class="o">-</span><span class="n">U</span> <span class="n">itversity_sms_user</span> \
  <span class="o">-</span><span class="n">h</span> <span class="n">localhost</span> \
  <span class="o">-</span><span class="n">p</span> <span class="mi">5433</span> \
  <span class="o">-</span><span class="n">d</span> <span class="n">itversity_sms_db</span> \
  <span class="o">-</span><span class="n">W</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">users</span></code> table.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">users</span> <span class="p">(</span>
  <span class="n">user_id</span> <span class="n">SERIAL</span> <span class="n">PRIMARY</span> <span class="n">KEY</span><span class="p">,</span>
  <span class="n">user_first_name</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">user_last_name</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">user_email_id</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span><span class="p">,</span>
  <span class="n">user_email_validated</span> <span class="n">BOOLEAN</span> <span class="n">DEFAULT</span> <span class="n">FALSE</span><span class="p">,</span>
  <span class="n">user_password</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">200</span><span class="p">),</span>
  <span class="n">user_role</span> <span class="n">VARCHAR</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">NOT</span> <span class="n">NULL</span> <span class="n">DEFAULT</span> <span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="o">--</span><span class="n">U</span> <span class="ow">and</span> <span class="n">A</span>
  <span class="n">is_active</span> <span class="n">BOOLEAN</span> <span class="n">DEFAULT</span> <span class="n">FALSE</span><span class="p">,</span>
  <span class="n">created_dt</span> <span class="n">DATE</span> <span class="n">DEFAULT</span> <span class="n">CURRENT_DATE</span>
<span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create the file with sample data. In this case data is added to users.csv under <strong>~/sms_db</strong>.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user_first_name</span><span class="p">,</span><span class="n">user_last_name</span><span class="p">,</span><span class="n">user_email_id</span><span class="p">,</span><span class="n">user_role</span><span class="p">,</span><span class="n">created_dt</span>
<span class="n">Gordan</span><span class="p">,</span><span class="n">Bradock</span><span class="p">,</span><span class="n">gbradock0</span><span class="nd">@barnesandnoble</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="mi">2020</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">10</span>
<span class="n">Tobe</span><span class="p">,</span><span class="n">Lyness</span><span class="p">,</span><span class="n">tlyness1</span><span class="nd">@paginegialle</span><span class="o">.</span><span class="n">it</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="mi">2020</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">10</span>
<span class="n">Addie</span><span class="p">,</span><span class="n">Mesias</span><span class="p">,</span><span class="n">amesias2</span><span class="nd">@twitpic</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="mi">2020</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">05</span>
<span class="n">Corene</span><span class="p">,</span><span class="n">Kohrsen</span><span class="p">,</span><span class="n">ckohrsen3</span><span class="nd">@buzzfeed</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="mi">2020</span><span class="o">-</span><span class="mi">04</span><span class="o">-</span><span class="mi">15</span>
<span class="n">Darill</span><span class="p">,</span><span class="n">Halsall</span><span class="p">,</span><span class="n">dhalsall4</span><span class="nd">@intel</span><span class="o">.</span><span class="n">com</span><span class="p">,</span><span class="n">U</span><span class="p">,</span><span class="mi">2020</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Copy the files onto the server. In this case it is running in docker container.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">cp</span> <span class="n">users</span><span class="o">.</span><span class="n">csv</span> <span class="n">itv_pg</span><span class="p">:</span><span class="o">/</span><span class="n">tmp</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Use copy command to load the data</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">COPY</span> <span class="n">users</span><span class="p">(</span><span class="n">user_first_name</span><span class="p">,</span> <span class="n">user_last_name</span><span class="p">,</span> <span class="n">user_email_id</span><span class="p">,</span> <span class="n">user_role</span><span class="p">,</span> <span class="n">created_dt</span><span class="p">)</span>
<span class="n">FROM</span> <span class="s1">&#39;/tmp/users.csv&#39;</span>
<span class="n">DELIMITER</span> <span class="s1">&#39;,&#39;</span>
<span class="n">CSV</span> <span class="n">HEADER</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Validate by running queries</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">users</span><span class="p">;</span>
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="content.html" title="previous page">Mastering Postgresql</a>
    <a class='right-next' id="next-link" href="03_writing_basic_sql_queries.html" title="next page">Writing Basic SQL Queries</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book community<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>